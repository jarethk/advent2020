Part 1 - seems like a fairly straight-forward cycle.  They talk like a circle queue, but the current cup is always going to be "next in line" so we can just keep shifting off the front.  Take off the first as the current, slice off the next 3 as the 3 moving, and figure out where those 3 get inserted, then add the current to the end of the queue.

Part 2 - 